{% extends "base.html" %}

{% block title %}Analysis Result – ResumeFit{% endblock %}

{% block content %}
<div class="py-4">

  <h1 class="mb-3">Result</h1>

  <p class="text-secondary">
    {% if job_title %}<strong>{{ job_title }}</strong>{% endif %}
    {% if company %} @ {{ company }}{% endif %}
  </p>

  <div class="display-5 fw-bold">
    Fit: {{ fit_pct }}%
    {% if fit_label == 'Strong' %}
      <span class="badge bg-success ms-3">Strong</span>
    {% elif fit_label == 'Medium' %}
      <span class="badge bg-warning text-dark ms-3">Medium</span>
    {% else %}
      <span class="badge bg-danger ms-3">Low</span>
    {% endif %}
  </div>

  <div class="row mt-4">
    <div class="col-md-6">
      <h4 class="mb-2">✅ Matched skills ({{ matched|length }})</h4>
      <ul class="list-group">
        {% for s in matched %}
          <li class="list-group-item bg-dark text-light border-secondary">{{ s }}</li>
        {% else %}
          <li class="list-group-item bg-dark text-light border-secondary">None detected</li>
        {% endfor %}
      </ul>
    </div>

    <div class="col-md-6">
      <h4 class="mb-2">❌ Missing skills ({{ missing|length }})</h4>
      <ul class="list-group">
        {% for s in missing %}
          <li class="list-group-item bg-dark text-light border-secondary">{{ s }}</li>
        {% else %}
          <li class="list-group-item bg-dark text-light border-secondary">None</li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <div class="mt-4">
    <a class="btn btn-outline-light btn-sm" href="{{ url_for('analyze') }}">Analyze another</a>
    <a class="btn btn-secondary btn-sm ms-2" href="{{ url_for('dashboard') }}">Back to Dashboard</a>

    {% if resume_id %}
      <a class="btn btn-outline-light btn-sm ms-2"
         href="{{ url_for('resume_view', resume_id=resume_id) }}" target="_blank">
        View original resume
      </a>
    {% endif %}
  </div>

  <p class="text-secondary small mt-3">
    Required skills detected from JD: {{ required|join(', ') }}
  </p>

</div>
{% endblock %}
